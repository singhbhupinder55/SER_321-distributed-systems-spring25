## Protocol Elaboration

*Note:* **CL == client, SV == server**

### Logging in
1) CL Request
   Client sends over their name
```
RequestType: NAME
Required Fields: name
```

2. SV Response
   Server responds with a greeting message
```
ResponseType: GREETING
Require Fields: message -- "Hello " + name + " and welcome to a simple game of Sudoku."
				menuoptions -- these are the menu options the client has -- main menu (see SockBaseServer.java)
				next = 2
```
In case of error
```
ResponseType: ERROR
RequiredFields: message = "required field missing or empty", 
                errorType = 1
                next = 2
```

### View Leader Board (from main menu)
CL Request
Clients wants the leaderboard
```
RequestType: LEADERBOARD
Required Fields: *none*
```
SV Response
Server responds with a repeated field of all past players
```
ResponseType: LEADERBOARD
Required Fields: leader (repeated field) including everyone on the leaderboard, 
				 menuoptions -- these are the menu options the client has -- main menu
				 next = 2
```
### Play Game (from main menu)
Client wants a game to be started
CL Request
```
RequestType: START
Required Fields: difficulty = int -- number between 1-20 representing the difficulty of the game
```

SV Response
Regular response, representing the number for difficulty was valid,
```
ResponseType: START
Required Fields: board, -- current board of the game
				 message = "\n"
				 menuoptions -- these are the menu options for in game
				 next = 3
```

ERROR response, representing the number for difficulty was not valid, goes back to main menu
```
ResponseType: ERROR
Required Fields: menuoptions -- these are the menu options the client has -- main menu
				 errorType = 5
				 message = "Error: difficulty is out of range"
				 next = 2
```

CL Request
While in game the client sends a row and column request, which includes the row, column as ints and a value as int which should be placed at this spot.
```
RequestType: UPDATE
Required Fields: row, 
				 column, 
				 value
```

SV Response

if game is not yet won the current board will be send and the eval field which will be used to specify the result of the clients request.
```
	ResponseType: PLAY
	Required Fields: board, -- current board to be displayed to player (getDisplayBoard())
					 points, -- current in game points
					 menuoptions, -- game menu options (not main menu) 
					 type -- represents what happened with the current request -- see response.proto for options
                     next = 3
 ```                    
OR if game is won/lost the current finished board will be send and eval will specify that the game is won
```
	ResponseType: WON
	Required Fields: board,
					 type = UPDATE
					 menuoptions -- these are the menu options the client has -- main menu
					 message = "You solved the current puzzle, good job!"
					 points, -- current points in game
					 next = 2
```

CL Request
While in game the client can send a clear request, either to clear a field, a row, column, grid, whole game or get a new board

Clear a value
```
RequestType: CLEAR
Required Fields: row,  -- integer of row
				 column, -- integer or column
				 value = 1
```

Clear a row
```
RequestType: CLEAR
Required Fields: row,  -- integer of row
				 column = -1,
				 value = 2
```

Clear column
```
RequestType: CLEAR
Required Fields: row = -1,
				 column, -- integer of column
				 value = 3
```

Clear grid
```
RequestType: CLEAR
Required Fields: row = -- integer of grid,
				 column = -1,
				 value = 4
```

Clear board back to original
```
RequestType: CLEAR
Required Fields: row = -1,
				 column = -1,
				 value = 5
```

New board
```
RequestType: CLEAR
Required Fields: row = -1,
				 column = -1,
				 value = 6
```

SV Response
```
if game is not yet won the current board will be send and the eval field which will be used to specify the result of the clients request.

	ResponseType: PLAY
	Required Fields: board, -- current board to be displayed to player (getDisplayBoard())
					 points, -- current in game points
					 menuoptions, -- game menu options (not main menu) 
					 next = 3
					 type -- represents what happened with the current clean up -- see response.proto for options
```
*Repeat UPDATE and/or CLEAR requests until game is finished or quit*

### Exit (from main menu or user typed 'exit' while in game)
1. CL Request
```
RequestType: QUIT
Required Fields: *none*
```
2. SV Response
```
ResponseType: BYE
Required Fields: message -- a goodbye message from the server
```

### Errors
*These can be generated by any malformed or unexpected request. The client and server need to keep track of where they are*

SV Response
```
ResponseType: ERROR
RequiredFields: message (description of error), 
				errorType -- is a number as specified below
				board -- if in game mode should include the current board
				menuoptions -- should include the menu to be displayed, if in game game menu, if it was main menu then main menu
                next = X -- x needs to be set to where the client needs to go next, main menu, game menu or name. It does not have to be able to go to the submenues (e.g. clear). Makes sense to go back to the last menu displayed before error
  ```
Some error types to use:
1 - Error: required field missing or empty
2 - Error: request not supported
3 - Error: row or col out of bounds
4 - Error: request is not expected at this point
5 - Error: difficulty is out of range
0 - Error: any other errors, in this case the message will just be displayed

*NOTE: The client should display the error message that is sent by the server so the client can display it to the player.*
